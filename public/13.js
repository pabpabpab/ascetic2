(window.webpackJsonp=window.webpackJsonp||[]).push([[13,22],{38:function(e,t,r){"use strict";r.r(t);var s=r(1);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={name:"UserForm",props:["action","saveCmd"],data:function(){return{localUser:{id:0,email:"",name:"",role:"",password:"",email_verified:!1,send_confirm_registration:!1,send_reset_password:!1},userNameWasEdited:!1}},computed:i(i(i({},Object(s.c)("users",["singleUserFromServer","taskOfUserEditManager"])),Object(s.c)(["isAlarmingInput","typeinErrors"])),{},{showEmailSection:function(){return"create"===this.action||"editEmail"===this.taskOfUserEditManager},showRoleSection:function(){return"create"===this.action||"editRole"===this.taskOfUserEditManager},showPasswordSection:function(){return"create"===this.action||"editPassword"===this.taskOfUserEditManager}}),methods:i(i({},Object(s.b)("users",["saveUser","typeinValidation"])),{},{setLocalUser:function(e){this.localUser={id:e.id,email:e.email,name:e.name,role:e.role,email_verified:Boolean(e.email_verified_at),password:""}},setUserName:function(){"edit"===this.action||this.userNameWasEdited||(this.localUser.name=this.localUser.email.split("@")[0])},setNameWasEditedFlag:function(){this.userNameWasEdited=!0},checkConfirmRegistrationMark:function(){this.localUser.email_verified||(this.localUser.send_confirm_registration=!1)},checkEmailVerifiedMark:function(){this.localUser.send_confirm_registration||(this.localUser.email_verified=!1)}}),watch:{singleUserFromServer:function(e){e&&this.setLocalUser(e)},saveCmd:function(e){e&&this.$store.dispatch("users/saveUser",this.localUser)}},mounted:function(){this.$store.dispatch("resetTypeinErrors")}},l=r(2),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"show_block"},["create"===e.action?r("h1",[e._v("Создать пользователя")]):e._e(),e._v(" "),r("div",{staticClass:"content_block content_block_of_product_form"},[e.showEmailSection?[r("div",{staticClass:"input_text__container mt20"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.email,expression:"localUser.email"}],staticClass:"input_text product_form__input_text",class:{input_alarm:e.isAlarmingInput("email")},attrs:{type:"text",maxlength:"50",placeholder:" "},domProps:{value:e.localUser.email},on:{change:function(t){return e.setUserName()},keyup:function(t){e.typeinValidation(e.localUser),e.setUserName()},input:function(t){t.target.composing||e.$set(e.localUser,"email",t.target.value)}}}),e._v(" "),r("label",{staticClass:"input_text__label"},[e._v("E-mail пользователя")]),e._v(" "),r("p",{staticClass:"validation_message_at_input",domProps:{innerHTML:e._s(e.typeinErrors("email"))}})]),e._v(" "),r("div",{staticClass:"pdt20"},[r("p",{staticClass:"checkbox_input__item tal"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.email_verified,expression:"localUser.email_verified"}],staticClass:"checkbox_input",attrs:{id:"email_verified_mark",type:"checkbox",value:"true"},domProps:{checked:Array.isArray(e.localUser.email_verified)?e._i(e.localUser.email_verified,"true")>-1:e.localUser.email_verified},on:{click:function(t){return e.checkConfirmRegistrationMark()},change:function(t){var r=e.localUser.email_verified,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,"true");s.checked?i<0&&e.$set(e.localUser,"email_verified",r.concat(["true"])):i>-1&&e.$set(e.localUser,"email_verified",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.localUser,"email_verified",a)}}}),e._v(" "),r("label",{staticClass:"checkbox_label display_table",attrs:{for:"email_verified_mark"}},[e._v("\n                        E-mail существует\n                    ")])])]),e._v(" "),r("div",{staticClass:"pdt20 pdb20"},[r("p",{staticClass:"checkbox_input__item tal"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.send_confirm_registration,expression:"localUser.send_confirm_registration"}],staticClass:"checkbox_input",attrs:{id:"send_confirm_registration_mark",type:"checkbox",value:"true"},domProps:{checked:Array.isArray(e.localUser.send_confirm_registration)?e._i(e.localUser.send_confirm_registration,"true")>-1:e.localUser.send_confirm_registration},on:{click:function(t){return e.checkEmailVerifiedMark()},change:function(t){var r=e.localUser.send_confirm_registration,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,"true");s.checked?i<0&&e.$set(e.localUser,"send_confirm_registration",r.concat(["true"])):i>-1&&e.$set(e.localUser,"send_confirm_registration",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.localUser,"send_confirm_registration",a)}}}),e._v(" "),r("label",{staticClass:"checkbox_label display_table",attrs:{for:"send_confirm_registration_mark"}},[e._v("\n                        Отправить письмо пользователю для проверки E-mail\n                    ")])])]),e._v(" "),r("div",{staticClass:"input_text__container mt20"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.name,expression:"localUser.name"}],staticClass:"input_text product_form__input_text",class:{input_alarm:e.isAlarmingInput("name")},attrs:{type:"text",maxlength:"50",placeholder:" "},domProps:{value:e.localUser.name},on:{keyup:function(t){e.typeinValidation(e.localUser),e.setNameWasEditedFlag()},input:function(t){t.target.composing||e.$set(e.localUser,"name",t.target.value)}}}),e._v(" "),r("label",{staticClass:"input_text__label"},[e._v("Имя пользователя")]),e._v(" "),r("p",{staticClass:"validation_message_at_input",domProps:{innerHTML:e._s(e.typeinErrors("name"))}})])]:e._e(),e._v(" "),e.showRoleSection?[r("div",{staticClass:"input_text__container mt30"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.localUser.role,expression:"localUser.role"}],staticClass:"input_select product_form__input_text",class:{input_alarm:e.isAlarmingInput("role")},attrs:{required:""},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localUser,"role",t.target.multiple?r:r[0])},function(t){return e.typeinValidation(e.localUser)}]}},[r("option",{attrs:{disabled:""}}),e._v(" "),r("option",{attrs:{value:"user"}},[e._v("Обычный пользователь")]),e._v(" "),r("option",{attrs:{value:"admin"}},[e._v("Администратор")])]),e._v(" "),r("label",{staticClass:"input_select__label"},[e._v("Права пользователя")]),e._v(" "),r("p",{staticClass:"validation_message_at_input",domProps:{innerHTML:e._s(e.typeinErrors("role"))}})])]:e._e(),e._v(" "),"edit"===e.action?r("div",{staticClass:"pdb20"}):e._e(),e._v(" "),e.showPasswordSection?[r("div",{staticClass:"input_text__container mt30"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.password,expression:"localUser.password"}],staticClass:"input_text product_form__input_text",class:{input_alarm:e.isAlarmingInput("password")},attrs:{type:"text",maxlength:"50",placeholder:" "},domProps:{value:e.localUser.password},on:{keyup:function(t){return e.typeinValidation(e.localUser)},input:function(t){t.target.composing||e.$set(e.localUser,"password",t.target.value)}}}),e._v(" "),r("label",{staticClass:"input_text__label"},[e._v("Пароль пользователя для входа")]),e._v(" "),r("p",{staticClass:"validation_message_at_input",domProps:{innerHTML:e._s(e.typeinErrors("password"))}})]),e._v(" "),r("div",{staticClass:"pdt20 pdb20"},[r("p",{staticClass:"checkbox_input__item tal"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localUser.send_reset_password,expression:"localUser.send_reset_password"}],staticClass:"checkbox_input",attrs:{id:"send_reset_password_mark",type:"checkbox",value:"true"},domProps:{checked:Array.isArray(e.localUser.send_reset_password)?e._i(e.localUser.send_reset_password,"true")>-1:e.localUser.send_reset_password},on:{change:function(t){var r=e.localUser.send_reset_password,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,"true");s.checked?i<0&&e.$set(e.localUser,"send_reset_password",r.concat(["true"])):i>-1&&e.$set(e.localUser,"send_reset_password",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.localUser,"send_reset_password",a)}}}),e._v(" "),r("label",{staticClass:"checkbox_label",attrs:{for:"send_reset_password_mark"}},[e._v("\n                        Отправить письмо пользователю для сброса этого пароля и создания нового\n                    ")])])])]:e._e(),e._v(" "),"create"===e.action?r("button",{staticClass:"save_product_button mauto mt30",on:{click:function(t){return t.stopPropagation(),e.saveUser(e.localUser)}}},[e._v("\n            Создать\n        ")]):e._e()],2)])}),[],!1,null,null,null);t.default=c.exports},67:function(e,t,r){"use strict";r.r(t);var s=r(1);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={name:"UserEditManager",components:{UserForm:r(38).default},data:function(){return{saveCmd:!1}},computed:i(i({},Object(s.c)("users",["singleUserFromServer"])),{},{getHeader:function(){if(!this.singleUserFromServer)return"";var e={user:"Пользователь",admin:"Администратор"}[this.singleUserFromServer.role],t=this.singleUserFromServer.email,r=this.singleUserFromServer.social_id;return"".concat(e," ").concat(Boolean(t)?t:r)}}),methods:i(i({},Object(s.b)("users",["closeUserEditManager"])),{},{save:function(){var e=this;this.saveCmd=!0,setTimeout((function(){e.saveCmd=!1}),100)}})},l=r(2),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit_manager__screen"},[r("div",{staticClass:"edit_manager__content_wrapper"},[r("div",{staticClass:"edit_manager__header"},[r("h1",[e._v(e._s(e.getHeader))])]),e._v(" "),r("div",{staticClass:"edit_manager__content pdt20 pdb20"},[r("user-form",{attrs:{action:"edit",saveCmd:e.saveCmd}})],1),e._v(" "),r("div",{staticClass:"edit_manager__button_panel"},[r("button",{staticClass:"edit_manager__save_button",on:{click:function(t){return t.stopPropagation(),e.save()}}},[e._v("\n                Сохранить\n            ")])]),e._v(" "),r("div",{staticClass:"edit_manager__collapse_icon",on:{click:function(t){return e.closeUserEditManager()}}},[e._v("\n            ×\n        ")])])])}),[],!1,null,null,null);t.default=c.exports}}]);